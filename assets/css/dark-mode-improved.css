/* ==========================================================================
   DARK MODE IMPROVED VISIBILITY STYLES
   ========================================================================== */

/* Dark mode improved color scheme (Moonlight) */
html[data-theme="dark"] {
  /* Moonlight palette */
  --moon-bg: #0d1b2a;             /* deep navy */
  --moon-surface: #13233a;        /* surface navy */
  --moon-border: #1b2e46;         /* subtle border */
  --moon-text: #e6eef8;           /* soft white-blue */
  --moon-text-secondary: #c9d7e6; /* secondary text */
  --moon-text-muted: #9fb2c7;     /* muted text */
  --moon-accent: #8ecaff;         /* moonlight blue */
  --moon-accent-hover: #b3ddff;   /* lighter hover */
  --moon-accent-visited: #7db6e6; /* visited */

  /* Back-compat variables used by the theme */
  --global-base-color: var(--moon-bg);
  --global-bg-color: var(--moon-bg);
  --global-footer-bg-color: #0b1729;
  --global-border-color: var(--moon-border);
  --global-dark-border-color: var(--moon-surface);
  --global-link-color: var(--moon-accent);
  --global-link-color-hover: var(--moon-accent-hover);
  --global-link-color-visited: var(--moon-accent-visited);
  --global-masthead-link-color: var(--moon-accent);
  --global-masthead-link-color-hover: var(--moon-accent-hover);
  --global-text-color: var(--moon-text);
  --global-text-color-light: var(--moon-text-secondary);
  --global-thead-color: var(--moon-surface);

  /* High contrast but calm colors for content */
  --text-primary: var(--moon-text);
  --text-secondary: var(--moon-text-secondary);
  --text-muted: var(--moon-text-muted);
  --accent-blue: var(--moon-accent);
  --accent-light-blue: var(--moon-accent-hover);
  --accent-cyan: #9ed0ff; /* headings tint */
  --accent-green: #7cc4a6; /* occasional highlights */
  --accent-orange: #ffc27a;
  --accent-purple: #bda7e3;
  --accent-yellow: #ffe58a;
  
  /* Base background + text */
  background-color: var(--moon-bg) !important;
  color: var(--text-primary) !important;
  
  /* Fix grey text issues */
  .archive__item-excerpt,
  .page__meta,
  .page__date,
  .author__bio,
  .author__location,
  .author__urls-wrapper,
  .sidebar p,
  .sidebar .author__bio,
  p, 
  span,
  div {
    color: var(--text-primary) !important;
  }
  
  /* Backgrounds for major areas */
  body,
  .page,
  .page__content,
  .page__hero,
  .archive,
  .wrapper,
  .initial-content {
    background-color: var(--moon-bg) !important;
  }

  .sidebar,
  .notice,
  .panel {
    background-color: var(--moon-surface) !important;
  }

  /* Dividers */
  hr,
  .archive__item,
  .page__content hr,
  .archive hr {
    border-color: var(--moon-border) !important;
    color: var(--moon-border) !important;
  }

  /* Headers */
  h1, h2, h3, h4, h5, h6 {
    color: var(--accent-cyan) !important;
  }
  
  /* Main title */
  .page__title,
  .archive__item-title {
    color: var(--accent-cyan) !important;
  }
  
  /* Links */
  a {
    color: var(--moon-accent) !important;
  }
  
  a:hover {
    color: var(--moon-accent-hover) !important;
  }

  a:visited {
    color: var(--moon-accent-visited) !important;
  }
  
  /* Masthead (top navigation) */
  .masthead {
    background-color: #0b1729 !important; /* darker navy bar */
    border-bottom: 1px solid var(--moon-border) !important;
  }

  .masthead__inner-wrap .site-title a,
  .masthead__inner-wrap .site-title,
  .masthead__inner-wrap .masthead__menu-item a {
    color: var(--moon-accent) !important;  /* moonlight links */
  }
  
  .masthead__inner-wrap .masthead__menu-item a:hover,
  .masthead__inner-wrap .site-title a:hover {
    color: var(--moon-accent-hover) !important;
  }
  
  /* Author profile */
  .author__name {
    color: var(--accent-cyan) !important;
  }
  
  .author__bio {
    color: var(--text-primary) !important;
  }
  
  .author__location {
    color: var(--text-secondary) !important;
  }
  
  .author__urls a {
    color: var(--accent-blue) !important;
  }
  
  .author__urls a:hover {
    color: var(--accent-light-blue) !important;
  }
  
  /* Research papers and content */
  .archive__item-title a {
    color: var(--accent-cyan) !important;
  }
  
  .archive__item-excerpt {
    color: var(--text-primary) !important;
  }
  
  .page__date {
    color: var(--accent-green) !important;
  }
  
  /* CV specific elements */
  .cv-section h3 {
    color: var(--accent-purple) !important;
  }
  
  /* Education and experience items */
  .education-item,
  .experience-item {
    color: var(--text-primary) !important;
  }
  
  .education-item h4,
  .experience-item h4 {
    color: var(--accent-cyan) !important;
  }
  
  .education-item .institution,
  .experience-item .company {
    color: var(--accent-green) !important;
  }
  
  .education-item .date,
  .experience-item .date {
    color: var(--text-muted) !important;
  }
  
  /* Buttons */
  .btn {
    background-color: var(--accent-blue) !important;
    color: var(--text-primary) !important;
    border: 2px solid var(--accent-blue) !important;
  }
  
  .btn:hover {
    background-color: var(--accent-light-blue) !important;
    color: var(--text-primary) !important;
    border: 2px solid var(--accent-light-blue) !important;
  }
  
  /* Research specific elements */
  .research-item-title {
    color: var(--accent-cyan) !important;
  }
  
  .research-item-date {
    color: var(--accent-green) !important;
  }
  
  .research-item-excerpt {
    color: var(--text-primary) !important;
  }
  
  /* Footer */
  .page__footer {
    background-color: #0b1729 !important;
    border-top: 1px solid var(--moon-border) !important;
    color: var(--text-primary) !important;
  }
  
  .page__footer a {
    color: var(--accent-blue) !important;
  }
  
  .page__footer a:hover {
    color: var(--accent-light-blue) !important;
  }
  
  /* Sidebar elements */
  .sidebar {
    color: var(--text-primary) !important;
  }
  
  .sidebar h2, .sidebar h3 {
    color: var(--accent-cyan) !important;
  }
  
  .sidebar p {
    color: var(--text-primary) !important;
  }
  
  /* Tables */
  th {
    color: var(--accent-cyan) !important;
  }
  
  td {
    color: var(--text-primary) !important;
  }
  
  /* Code blocks */
  code {
    color: var(--accent-yellow) !important;
    background-color: #2d2d2d !important;
  }
  
  pre {
    color: var(--text-primary) !important;
    background-color: #2d2d2d !important;
  }
  
  /* Blockquotes */
  blockquote {
    color: var(--text-primary) !important;
    border-left: 4px solid var(--accent-cyan) !important;
  }
  
  /* Lists */
  ul, ol {
    color: var(--text-primary) !important;
  }
  
  li {
    color: var(--text-primary) !important;
  }
  
  /* Forms */
  input, textarea, select {
    color: var(--text-primary) !important;
    background-color: #3d3d3d !important;
    border: 2px solid var(--accent-blue) !important;
  }
  
  input:focus, textarea:focus, select:focus {
    border-color: var(--accent-light-blue) !important;
  }
  
  /* Specific fixes for grey text */
  .page__meta,
  .page__date,
  .archive__item-teaser,
  .archive__item-excerpt,
  .author__urls-wrapper,
  .author__location,
  .author__email {
    color: var(--text-secondary) !important;
  }
  
  /* Contact information */
  .author__urls .fa {
    color: var(--accent-blue) !important;
  }
  
  /* Make sure all paragraph text is visible */
  p {
    color: var(--text-primary) !important;
  }
  
  /* Breadcrumbs */
  .breadcrumbs {
    color: var(--text-muted) !important;
  }
  
  .breadcrumbs a {
    color: var(--accent-blue) !important;
  }

  /* Table borders and blockquote to match moon palette */
  table, th, td {
    border-color: var(--moon-border) !important;
  }

  blockquote {
    background-color: var(--moon-surface) !important;
  }
}